<div class="sport-teams-tab">
  <div class="sport-teams-tab__search-container">
    <tui-textfield iconStart="@tui.search">
      <label tuiLabel>Search teams</label>
      <input
        placeholder="Search by name or city..."
        tuiTextfield
        [value]="teamSearchQuery()"
        (input)="onTeamSearchChange($any($event.target).value)" />
    </tui-textfield>
    @if (teamSearchQuery()) {
      <button
        type="button"
        appearance="flat"
        icon="@tui.close"
        size="s"
        (click)="clearTeamSearch()"
        class="sport-teams-tab__search-clear">
        <tui-icon [icon]="'@tui.close'" />
      </button>
    }
  </div>

  @if (teamsLoading()) {
    <div class="sport-teams-tab__loading">Loading teams...</div>
  } @else if (teamsError()) {
    <div class="sport-teams-tab__error">{{ teamsError() }}</div>
  } @else if (paginatedTeams().length === 0) {
    <p class="sport-teams-tab__empty-message">No teams found for this sport</p>
  } @else {
    <div class="sport-teams-tab__team-list">
      @for (team of paginatedTeams(); track team.id) {
        <button
          class="sport-teams-tab__team-card"
          tuiCardLarge
          tuiCell="l"
          (click)="navigateToTeamDetail(team.id)">
          <div class="sport-teams-tab__team-icon">
            @if (teamLogoUrl(team); as logoUrl) {
              <img [src]="logoUrl" [alt]="team.title" class="sport-teams-tab__team-logo" />
            } @else {
              <tui-avatar size="l" class="sport-teams-tab__team-avatar">
                <tui-icon icon="@tui.users" />
              </tui-avatar>
            }
          </div>
          <div class="sport-teams-tab__team-content">
            <h3 class="sport-teams-tab__team-title">{{ team.title }}</h3>
            @if (team.city) {
              <p class="sport-teams-tab__team-city">{{ team.city }}</p>
            }
          </div>
        </button>
      }
    </div>

    @if (teamsTotalPagesComputed() > 1) {
      <div class="sport-teams-tab__pagination-wrapper">
        <div class="sport-teams-tab__items-per-page">
          <span>Items per page:</span>
          @for (option of itemsPerPageOptions; track option) {
            <button
              type="button"
              class="sport-teams-tab__items-option"
              [class.sport-teams-tab__items-option--active]="teamsItemsPerPage() === option"
              (click)="onTeamsItemsPerPageChange(option)">
              {{ option }}
            </button>
          }
        </div>
        <div class="sport-teams-tab__pagination">
          <tui-pagination
            [length]="teamsTotalPagesComputed()"
            [index]="teamsCurrentPage() - 1"
            (indexChange)="onTeamsPageChange($event)" />
        </div>
      </div>
    }
  }
</div>
