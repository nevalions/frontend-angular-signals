<form class="login-dialog" [formGroup]="loginForm">
  <div class="login-dialog__header">
    <h2 class="login-dialog__title">Sign In</h2>
    <p class="login-dialog__subtitle">Enter your credentials to access your account</p>
  </div>

  <div class="login-dialog__fields">
    <div class="login-dialog__field">
      <label for="username" class="login-dialog__label">Username</label>
      <input
        id="username"
        type="text"
        formControlName="username"
        class="login-dialog__input"
        [class.login-dialog__input--invalid]="usernameControl?.invalid && usernameControl?.touched"
        placeholder="Enter your username"
      />
      @if (usernameControl?.invalid && usernameControl?.touched) {
        @if (usernameControl?.errors?.['required']) {
          <div class="login-dialog__error">Username is required</div>
        }
      }
    </div>

    <div class="login-dialog__field">
      <label for="password" class="login-dialog__label">Password</label>
      <input
        id="password"
        type="password"
        formControlName="password"
        class="login-dialog__input"
        [class.login-dialog__input--invalid]="passwordControl?.invalid && passwordControl?.touched"
        placeholder="Enter your password"
      />
      @if (passwordControl?.invalid && passwordControl?.touched) {
        @if (passwordControl?.errors?.['required']) {
          <div class="login-dialog__error">Password is required</div>
        }
        @if (passwordControl?.errors?.['minlength']) {
          <div class="login-dialog__error">Password must be at least 6 characters</div>
        }
      }
    </div>
  </div>

  <div class="login-dialog__actions">
    <button type="submit" tuiButton (click)="onSubmit()" [disabled]="loginForm.invalid || loading()">
      @if (loading()) {
        <span>Signing in...</span>
      } @else {
        <span>Sign In</span>
      }
    </button>
  </div>

  <div class="login-dialog__footer">
    <span class="login-dialog__footer-text">Don't have an account?</span>
    <button type="button" tuiButton appearance="flat" class="login-dialog__link" (click)="openRegisterDialog()">
      Sign Up
    </button>
  </div>
</form>
