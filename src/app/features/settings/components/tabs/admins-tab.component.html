<div class="admins-tab">
  <div class="admins-tab__search-container">
    <tui-textfield iconStart="@tui.search">
      <label tuiLabel>Search admins</label>
      <input
        placeholder="Search by name or email..."
        tuiTextfield
        [value]="adminSearchQuery()"
        (input)="onAdminSearchChange($any($event.target).value)" />
    </tui-textfield>
    @if (adminSearchQuery()) {
      <button
        type="button"
        tuiButton
        appearance="flat"
        size="s"
        (click)="clearAdminSearch()"
        class="admins-tab__search-clear">
        <tui-icon icon="@tui.close" />
      </button>
    }
  </div>

  @if (adminsLoading()) {
    <div class="admins-tab__loading">Loading admins...</div>
  } @else if (adminsError()) {
    <div class="admins-tab__error">{{ adminsError() }}</div>
  } @else if (adminsList().length === 0) {
    <p class="admins-tab__empty-message">No admins found</p>
  } @else {
    <div class="admins-tab__admin-list">
      @for (admin of adminsList(); track admin.id) {
        <app-user-card
          [user]="admin"
          [showOnlineStatus]="false"
          [showAccountStatus]="true"
          [showMemberSince]="false"
          [showLastOnline]="false"
          [showEditButton]="true"
          [showRemoveButton]="true"
          (editClick)="editAdmin(admin)"
          (removeClick)="removeAdmin(admin)" />
      }
    </div>

    @if (apiTotalPages > 1) {
      <div class="admins-tab__pagination-wrapper">
        <div class="admins-tab__items-per-page">
          <span>Items per page:</span>
          @for (option of itemsPerPageOptions; track option) {
            <button
              type="button"
              tuiButton
              [appearance]="adminsItemsPerPage() === option ? 'primary' : 'outline'"
              size="xs"
              class="admins-tab__items-option"
              (click)="onAdminsItemsPerPageChange(option)">
              {{ option }}
            </button>
          }
        </div>
        <div class="admins-tab__pagination">
          <tui-pagination
            [length]="apiTotalPages"
            [index]="adminsCurrentPage() - 1"
            (indexChange)="onAdminsPageChange($any($event))" />
        </div>
      </div>
    }
  }
</div>
