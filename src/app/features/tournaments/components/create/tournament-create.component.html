<div class="tournament-create">
  <header class="tournament-create__header">
    <h1 class="tournament-create__title">Create New Tournament</h1>
    @if (sport && season) {
      <div class="tournament-create__context">
        <span>{{ sport.title }}</span>
        <span>â€º</span>
        <span>{{ season.year }}</span>
      </div>
    }
    <div class="tournament-create__actions">
      <button tuiButton type="button" (click)="cancel()">Cancel</button>
      <button tuiButton type="submit" (click)="onSubmit()" [disabled]="tournamentForm.invalid">Create Tournament</button>
    </div>
  </header>

  <form class="tournament-create__form" [formGroup]="tournamentForm">
    <div class="tournament-create__field">
      <label for="title" class="tournament-create__label">Title *</label>
      <input
        id="title"
        type="text"
        formControlName="title"
        class="tournament-create__input"
        [class.tournament-create__input--invalid]="tournamentForm.get('title')?.touched && tournamentForm.get('title')?.invalid"
      />
      @if (tournamentForm.get('title')?.touched && tournamentForm.get('title')?.errors?.['required']) {
        <div class="tournament-create__error">Title is required</div>
      }
    </div>

    <div class="tournament-create__field">
      <label for="description" class="tournament-create__label">Description</label>
      <textarea
        id="description"
        formControlName="description"
        class="tournament-create__textarea"
        rows="4"
        placeholder="Enter a description for tournament (optional)"
      ></textarea>
    </div>

    <div class="tournament-create__field">
      <label for="tournament_eesl_id" class="tournament-create__label">EESL ID</label>
      <input
        id="tournament_eesl_id"
        type="number"
        formControlName="tournament_eesl_id"
        class="tournament-create__input"
      />
    </div>

    <div class="tournament-create__field">
      <label class="tournament-create__label">Main Sponsor</label>
      <tui-textfield tuiChevron [content]="sponsorContent" [stringify]="sponsorStringify">
        <input
          placeholder="Select Main Sponsor (optional)"
          tuiSelect
          formControlName="main_sponsor_id"
        />
        <tui-data-list *tuiTextfieldDropdown size="l">
          @for (sponsor of sponsors(); track sponsor.id) {
            <button new tuiOption type="button" [value]="sponsor.id" class="tournament-create__sponsor-option">{{ formatTitle(sponsor.title) }}</button>
          }
        </tui-data-list>
      </tui-textfield>
    </div>

    <div class="tournament-create__field">
      <label class="tournament-create__label">Sponsor Line</label>
      <tui-textfield tuiChevron [content]="sponsorLineContent" [stringify]="sponsorLineStringify">
        <input
          placeholder="Select Sponsor Line (optional)"
          tuiSelect
          formControlName="sponsor_line_id"
        />
        <tui-data-list *tuiTextfieldDropdown size="l">
          @for (line of sponsorLines(); track line.id) {
            <button new tuiOption type="button" [value]="line.id" class="tournament-create__sponsor-line-option">{{ formatTitle(line.title) }}</button>
          }
        </tui-data-list>
      </tui-textfield>
    </div>

    <div class="tournament-create__field">
      <app-image-upload
        label="Logo"
        mode="three-size"
        [currentUrls]="logoPreviewUrls()"
        [uploading]="logoUploadLoading()"
        (upload)="onLogoUpload($event)"
        (remove)="onLogoRemove()"
      />
    </div>
  </form>
</div>
