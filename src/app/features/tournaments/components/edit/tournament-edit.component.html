<div class="tournament-edit">
  <header class="tournament-edit__header">
    <h1 class="tournament-edit__title">Edit Tournament</h1>
    <div class="tournament-edit__context">
      <span>{{ sport?.title }}</span>
      <span>â€º</span>
      <span>{{ season?.year }}</span>
    </div>
    <div class="tournament-edit__actions">
      <button tuiButton type="button" (click)="cancel()">Cancel</button>
      <button tuiButton type="button" (click)="onSubmit()" [disabled]="tournamentForm.invalid">Save Changes</button>
    </div>
  </header>

  @if (this.loading()) {
    <div class="tournament-edit__loading">Loading tournament...</div>
  }

  @if (tournament) {
    <form class="tournament-edit__form" [formGroup]="tournamentForm">
      <div class="tournament-edit__field">
        <label for="title" class="tournament-edit__label">Title *</label>
        <input
          id="title"
          type="text"
          formControlName="title"
          class="tournament-edit__input"
          [class.tournament-edit__input--invalid]="tournamentForm.controls.title.touched && tournamentForm.controls.title.invalid"
        />
        @if (tournamentForm.controls.title.touched && tournamentForm.controls.title.invalid) {
          @if (tournamentForm.controls.title.errors?.['required']) {
            <div class="tournament-edit__error">Title is required</div>
          }
        }
      </div>

      <div class="tournament-edit__field">
        <label for="description" class="tournament-edit__label">Description</label>
        <textarea
          id="description"
          formControlName="description"
          class="tournament-edit__textarea"
          rows="4"
          placeholder="Enter a description for tournament (optional)"
        ></textarea>
      </div>

      <div class="tournament-edit__field">
        <label for="tournament_eesl_id" class="tournament-edit__label">EESL ID</label>
        <input
          id="tournament_eesl_id"
          type="number"
          formControlName="tournament_eesl_id"
          class="tournament-edit__input"
        />
      </div>

      <div class="tournament-edit__field">
        <label for="main_sponsor_id" class="tournament-edit__label">Main Sponsor ID</label>
        <input
          id="main_sponsor_id"
          type="number"
          formControlName="main_sponsor_id"
          class="tournament-edit__input"
        />
      </div>

      <div class="tournament-edit__field">
        <label for="sponsor_line_id" class="tournament-edit__label">Sponsor Line ID</label>
        <input
          id="sponsor_line_id"
          type="number"
          formControlName="sponsor_line_id"
          class="tournament-edit__input"
        />
      </div>

      <div class="tournament-edit__field">
        <app-image-upload
          label="Logo"
          mode="three-size"
          [currentUrls]="displayLogoUrls()"
          [uploading]="logoUploadLoading()"
          (upload)="onLogoUpload($event)"
          (remove)="onLogoRemove()"
        />
      </div>
    </form>
  } @else {
    <div class="tournament-edit__not-found">Tournament not found</div>
  }
</div>
