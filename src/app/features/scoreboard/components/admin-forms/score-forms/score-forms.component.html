<app-collapsible-section title="Score Controls" sectionKey="scoreboard-score">
  <ng-template>
    <div class="score-forms">
      <!-- Score Inputs and Save Section -->
      <div class="score-inputs-and-save">
        <div class="score-inputs-section">
          @for (team of teamConfig; track team.key) {
            <div class="team-score" [class]="team.class">
              <span class="team-label">{{ team.label }}</span>
              <tui-textfield>
                <input
                  tuiInputNumber
                  [ngModel]="team.pendingScore()"
                  [min]="0"
                  [max]="199"
                  [step]="1"
                  (ngModelChange)="team.onChange($event)"
                />
              </tui-textfield>
            </div>
            @if (team.key === 'a') {
              <div class="score-separator">:</div>
            }
          }
        </div>

        <div class="save-section">
          <button
            tuiButton
            type="button"
            appearance="primary"
            size="l"
            class="save-button"
            [disabled]="!hasChanges()"
            (click)="onSave()"
          >
            Save
          </button>
        </div>
      </div>

      <!-- Quick Score Buttons Section -->
      <div class="quick-score-section">
        @for (team of teamConfig; track team.key) {
          <div class="quick-score-row">
            <span class="row-label">{{ team.label }}</span>
            <div class="quick-buttons">
              <button
                tuiButton
                type="button"
                [appearance]="team.touchdownCalled() ? 'accent' : 'outline'"
                size="l"
                title="Touchdown Called"
                class="td-toggle-button"
                [class.td-active]="team.touchdownCalled()"
                (click)="team.toggleTouchdown()"
              >
                <span class="td-icon">üèà</span>
                <span class="td-label">TD</span>
              </button>
              @for (btn of quickScoreButtons; track btn.label) {
                <button
                  tuiButton
                  type="button"
                  appearance="secondary"
                  size="l"
                  [title]="btn.title"
                  (click)="team.onQuickScore(btn.value)"
                >
                  {{ btn.label }}
                </button>
              }
            </div>
          </div>
        }
      </div>
    </div>
  </ng-template>
</app-collapsible-section>
