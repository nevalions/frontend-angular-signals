# Tournament EESL Matches Parse Page Schema

**Route**: `/sports/:sportId/seasons/:year/tournaments/:id/parse-matches`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                    â”‚    NAVBAR       â”‚                      â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â† Back          TOURNAMENT TITLE (or "Parse EESL")       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  Parse and automatically create matches from       â”‚
â”‚  EESL tournament.                                        â”‚
â”‚                                                             â”‚
â”‚  EESL Tournament ID: 34                                    â”‚
â”‚                                                             â”‚
â”‚  [Parse and Create Matches]                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Matches Created                                            â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ğŸ“… 2024-01-15                             â”‚         â”‚
â”‚  â”‚    Team A: 5 vs Team B: 3                 â”‚         â”‚
â”‚  â”‚    Week 1                                   â”‚         â”‚
â”‚  â”‚    EESL ID: 123                            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ğŸ“… 2024-01-22                             â”‚         â”‚
â”‚  â”‚    Team A: 7 vs Team B: 2                 â”‚         â”‚
â”‚  â”‚    Week 2                                   â”‚         â”‚
â”‚  â”‚    EESL ID: 456                            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## What's on the page

- EntityHeader component:
   - Back button â†’ Navigate to `/sports/:sportId/seasons/:year/tournaments/:id`
   - Title: Tournament title (e.g., "PREMIER LEAGUE") with fallback to "Parse EESL Tournament Matches"
   - Logo: Tournament logo icon URL (optional)
- Description text explaining the feature
- EESL Tournament ID display:
  - Shows tournament_eesl_id value
  - Only displayed if tournament has eesl_id
- Action button:
  - TuiButton with `appearance="primary"`
  - "Parse and Create Matches" button â†’ Fetch matches from EESL API and create them in database in one step
  - Shows "Parsing and Creating..." while processing
  - Disabled when tournament has no eesl_id
- Created matches list:
  - Shows each match with match date or match number
  - Displays team A and team B IDs
  - Shows week number if available
  - Shows EESL ID if available
  - TuiIcon (`@tui.calendar`) as match icon
  - Only displayed after successful parse
  - No remove/selection controls (all matches are created)
- Success dialog:
  - TuiDialogService modal shows success message with match count
  - "Success" label, size 'm'
  - Auto-navigates back to `/sports/:sportId/seasons/:year/tournaments/:id` on dialog close

## What we need from backend

**For parsing and creating EESL tournament matches:**

- Tournament eesl_id (from tournament.tournament_eesl_id)
- List of match data from EESL API
- Each match contains:
  - match_eesl_id
  - match_date (optional)
  - week (optional)
  - team_a_id
  - team_b_id
- Backend creates:
  - Matches in database
- Returns: List of created matches with full Match objects (including id)
- **Backend API Endpoint:** `GET /api/matches/pars_and_create/tournament/{eesl_tournament_id}` (where eesl_tournament_id is tournament.tournament_eesl_id)

**Note:** The backend returns a list of created matches with their database IDs.

**For tournament context:**

- Tournament id (from route parameter `:id`)
- Tournament title
- Tournament logo icon URL (optional)
- Tournament eesl_id (required for parsing)
- [Interface: `Tournament`](../../../src/app/features/tournaments/models/tournament.model.ts)
- [Backend Schema: `TournamentSchema`](../../../../statsboards-backend/src/tournaments/schemas.py)
- **Backend API Endpoint:** `GET /api/tournaments/id/{tournament_id}/`

**For sport context:**

- Sport id (from route parameter `:sportId`)
- Sport title
- [Interface: `Sport`](../../../src/app/features/sports/models/sport.model.ts)
- [Backend Schema: `SportSchema`](../../../../statsboards-backend/src/sports/schemas.py)
- **Backend API Endpoint:** `GET /api/sports/id/{sport_id}/`

**For season context:**

- Season year (from route parameter `:year`)
- Season ID (derived from season year)
- [Interface: `Season`](../../../src/app/features/seasons/models/season.model.ts)
- [Backend Schema: `SeasonSchema`](../../../../statsboards-backend/src/seasons/schemas.py)
- **Backend API Endpoint:** `GET /api/seasons/`

## Backend Endpoint Verification

All endpoints exist in backend:

- `GET /api/matches/pars_and_create/tournament/{eesl_tournament_id}` - Verified in `/statsboards-backend/src/matches/parser_router.py`
- `GET /api/tournaments/id/{tournament_id}/` - Standard BaseRouter endpoint
- `GET /api/sports/id/{sport_id}/` - Standard BaseRouter endpoint
- `GET /api/seasons/` - Standard BaseRouter endpoint
